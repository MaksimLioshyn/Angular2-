<div class="panel panel-primary">
  <div class="panel-heading">Order</div>

  <div class="panel-body">
    <form
      class="form-horizontal"
      novalidate
      (ngSubmit)="order()"
      [formGroup]="orderForm"
    >
      <fieldset>
        <div class="form-group" [ngClass]="{ 'has-error': isValid('name') }">
          <label class="control-label" for="name">Name</label>
          <input
            class="form-control"
            id="nameId"
            type="text"
            placeholder="Name"
            formControlName="name"
          />
        </div>
        <div *ngIf="hasErrors('name')">
          <div
            *ngIf="orderForm.get('name').hasError('required')"
            class="alert alert-danger"
          >
            <span>Please enter your name.</span>
          </div>
          <div
            *ngIf="orderForm.get('name').hasError('minlength')"
            class="alert alert-danger"
          >
            <span>The name must be longer than 3 characters.</span>
          </div>
        </div>

        <div class="form-group" [ngClass]="{ 'has-error': isValid('email') }">
          <label class="control-label" for="emailId">Email</label>
          <input
            class="form-control"
            id="emailId"
            type="email"
            placeholder="Email"
            formControlName="email"
          />
        </div>

        <div *ngIf="hasErrors('email')">
          <div *ngIf="emailMessage" class="alert alert-danger">
            <span>emailMessage</span>
          </div>
        </div>

        <div
          formArrayName="phones"
          *ngFor="let phone of phones.controls; let i = index"
        >
          <div
            class="form-group"
            [ngClass]="{ 'has-error': isValid('phones', i) }"
          >
            <label class="control-label" attr.for="{{ 'phoneId' + i }}"
              >Phone {{ i | json }}</label
            >
            <input
              class="form-control"
              id="{{ 'phoneId' + i }}"
              type="tel"
              placeholder="Phone"
              [formControlName]="i"
            />

            <button
              class="btn btn-primary"
              type="button"
              (click)="removePhone(i)"
            >
              Remove Phone
            </button>
          </div>
        </div>
        <div class="form-group">
          <div class="col-md-offset-2">
            <button class="btn btn-primary" type="button" (click)="addPhone()">
              Add Phone
            </button>
          </div>
        </div>

        <div class="form-group">
          <div class="col-md-offset-2">
            <span>
              <button
                class="btn btn-primary"
                type="submit"
                [disabled]="!orderForm.valid"
              >
                Send
              </button>
            </span>
          </div>
        </div>
      </fieldset>
    </form>
  </div>
</div>
<br />Value: {{ orderForm.value | json }}
